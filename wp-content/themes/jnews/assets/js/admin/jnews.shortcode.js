!function(e,r){"use strict";var t=null;tinymce.PluginManager.add("jnews_shortcode",(function(o,n){o.addButton("jnews_grid",{title:"Grid Builder",image:n+"/shortcode/grid.png",cmd:"jnews_grid_cmd"}),o.addCommand("jnews_grid_cmd",(function(){(t=a("Grid Builder",[{type:"grid",name:"Grid Layout"}],820)).find("#exeCmd").on("click",(function(r){var a='<div class="row clearfix">\n';e(".buildgrid > li").each((function(){var r=parseInt(e(this).attr("data-length"),10);a+='<div class="col-md-'+r+'"><p>Your Content Goes Here</p></div>\n'})),a+="</div>\n",o.execCommand("mceInsertContent",!1,a),t.remove()}))})),o.on("init",(function(e){o.formatter.register("jnews_intro_formater",{block:"div",classes:["intro-text"],wrapper:!0})})),o.addButton("jnews_intro",{title:"Intro",image:n+"/shortcode/intro.png",cmd:"jnews_intro_cmd",onPostRender:function(){var e=this;o.on("NodeChange",(function(r){var t=o.formatter.match("jnews_intro_formater");e.active(t)}))}}),o.addCommand("jnews_intro_cmd",(function(){o.formatter.match("jnews_intro_formater")?o.formatter.remove("jnews_intro_formater"):o.formatter.apply("jnews_intro_formater")}));var c=function(e){var r=e.formatter.match("jnews_dropcaps_formater"),t=e.formatter.match("jnews_dropcaps_formater_square"),o=e.formatter.match("jnews_dropcaps_formater_circle"),a=e.formatter.match("jnews_dropcaps_formater_rounded"),n=e.formatter.match("jnews_dropcaps_formater_border"),c=e.formatter.match("jnews_dropcaps_formater_border_rounded"),l=e.formatter.match("jnews_dropcaps_formater_border_circle"),i=e.formatter.match("jnews_dropcaps_formater_shadow");return Boolean(r|t|o|a|n|c|l|i)};o.on("init",(function(e){o.formatter.register("jnews_dropcaps_formater",{block:"span",classes:["dropcap"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_square",{block:"span",classes:["dropcap","square"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_circle",{block:"span",classes:["dropcap","circle"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_rounded",{block:"span",classes:["dropcap","rounded"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_border",{block:"span",classes:["dropcap","border"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_border_rounded",{block:"span",classes:["dropcap","border","rounded"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_border_circle",{block:"span",classes:["dropcap","border","circle"],wrapper:!0,styles:["background-color","color","border-color"]}),o.formatter.register("jnews_dropcaps_formater_shadow",{block:"span",classes:["dropcap","shadow"],wrapper:!0,styles:["background-color","color","border-color"]})})),o.addButton("jnews_dropcaps",{title:"Dropcap",image:n+"/shortcode/dropcaps.png",cmd:"jnews_dropcaps_cmd",onPostRender:function(){var e=this;o.on("NodeChange",(function(r){e.active(c(o))}))}}),o.addCommand("jnews_dropcaps_cmd",(function(){if(c(o))for(var r=["jnews_dropcaps_formater","jnews_dropcaps_formater_square","jnews_dropcaps_formater_circle","jnews_dropcaps_formater_rounded","jnews_dropcaps_formater_border","jnews_dropcaps_formater_border_rounded","jnews_dropcaps_formater_border_circle","jnews_dropcaps_formater_shadow"],n=0;n<r.length;n++)o.formatter.match(r[n])&&o.formatter.remove(r[n]);else{var l=o.selection.getContent(),i=["normal","square","circle","rounded","square-border","rounded-border","circle-border","shadow"];(t=a("Dropcap",""===l?[{type:"select",name:"Select Dropcap style ",id:"dropstyle",option:i},{type:"colorpicker",name:"Background Color",id:"bgcolor",color:"#ffffff"},{type:"colorpicker",name:"Text Color",id:"txtcolor",color:"#000000"},{type:"colorpicker",name:"Border Color",id:"bordercolor",color:"#ffffff"},{type:"text",name:"Dropcap String",id:"dropcap"}]:[{type:"select",name:"Select Dropcap style ",id:"dropstyle",option:i},{type:"colorpicker",name:"Background Color",id:"bgcolor",color:"#ffffff"},{type:"colorpicker",name:"Text Color",id:"txtcolor",color:"#000000"},{type:"colorpicker",name:"Border Color",id:"bordercolor",color:"#ffffff"}],500)).find("#exeCmd").on("click",(function(r){e("#style").val();var a=e("#txtcolor").val(),n=e("#bgcolor").val(),c=e("#bordercolor").val(),i="";i=""!==l?l:e("#dropcap").val();var d=e("#dropstyle").val();"normal"===d?d="":"square-border"===d?d="border":"rounded-border"===d?d="border rounded":"circle-border"===d&&(d="border circle");var s='<span class="dropcap '+d+'" style="'+("background-color : "+n+"; color : "+a+"; border-color : "+c)+'">'+i+"</span>";o.execCommand("mceInsertContent",!1,s),t.remove()}))}})),o.on("init",(function(e){o.formatter.register("jnews_highlight_formater",{block:"span",classes:["highlight"],wrapper:!0,styles:["background-color","color"]})})),o.addButton("jnews_highlight",{title:"Highlight",image:n+"/shortcode/highlight.png",cmd:"jnews_highlight_cmd",onPostRender:function(){var e=this;o.on("NodeChange",(function(r){var t=o.formatter.match("jnews_highlight_formater");e.active(t)}))}}),o.addCommand("jnews_highlight_cmd",(function(){if(o.formatter.match("jnews_highlight_formater"))o.formatter.remove("jnews_highlight_formater");else{var r=o.selection.getContent();(t=a("Highlight",""===r?[{type:"colorpicker",name:"Background Color",id:"bgcolor",color:"#666666"},{type:"colorpicker",name:"Text Color",id:"txtcolor",color:"#ffffff"},{type:"text",name:"Highlighed text",id:"highlight"}]:[{type:"colorpicker",name:"Background Color",id:"bgcolor",color:"#666666"},{type:"colorpicker",name:"Text Color",id:"txtcolor",color:"#ffffff"}],500)).find("#exeCmd").on("click",(function(a){var n=e("#txtcolor").val(),c='<span class="highlight" style="'+("background-color : "+e("#bgcolor").val()+"; color : "+n)+'">'+(""!==r?r:e("#highlight").val())+"</span>";o.execCommand("mceInsertContent",!1,c),t.remove()}))}}));var l=function(e){var r=e.formatter.match("jnews_pullquote_formater_center"),t=e.formatter.match("jnews_pullquote_formater_right"),o=e.formatter.match("jnews_pullquote_formater_left");return Boolean(r|t|o)};o.on("init",(function(e){o.formatter.register("jnews_pullquote_formater_center",{block:"blockquote",classes:["pullquote","align-center"],wrapper:!0}),o.formatter.register("jnews_pullquote_formater_right",{block:"blockquote",classes:["pullquote","align-right"],wrapper:!0}),o.formatter.register("jnews_pullquote_formater_left",{block:"blockquote",classes:["pullquote","align-left"],wrapper:!0})})),o.addButton("jnews_pullquote",{title:"Pullquote",image:n+"/shortcode/pullquote.png",cmd:"jnews_pullquote_cmd",onPostRender:function(){var e=this;o.on("NodeChange",(function(r){e.active(l(o))}))}}),o.addCommand("jnews_pullquote_cmd",(function(){l(o)?(o.formatter.match("jnews_pullquote_formater_center")&&o.formatter.remove("jnews_pullquote_formater_center"),o.formatter.match("jnews_pullquote_formater_right")&&o.formatter.remove("jnews_pullquote_formater_right"),o.formatter.match("jnews_pullquote_formater_left")&&o.formatter.remove("jnews_pullquote_formater_left")):(t=a("Pullquote",[{type:"select",name:"Pullquote Position ",id:"pullposition",option:["left","right","center"]}],500)).find("#exeCmd").on("click",(function(r){switch(e("#pullposition").val()){case"left":o.formatter.apply("jnews_pullquote_formater_left");break;case"right":o.formatter.apply("jnews_pullquote_formater_right");break;case"center":o.formatter.apply("jnews_pullquote_formater_center")}t.remove()}))})),o.addButton("jnews_alert",{title:"Alert",image:n+"/shortcode/alert.png",cmd:"jnews_alert_cmd"}),o.addCommand("jnews_alert_cmd",(function(){(t=a("Alert",[{type:"select",name:"Select alert style",id:"select-color",option:["warning","error","success","info"]},{type:"text",name:"Alert Title",id:"alert-title"},{type:"text",name:"Alert Content",id:"alert-content"}],500)).find("#exeCmd").on("click",(function(r){var a=e("#select-color").val(),n="";"warning"==a?n="alert-warning":"error"==a?n="alert-error":"success"==a?n="alert-success":"info"==a&&(n="alert-info");var c="<div class='alert "+n+"'><strong>"+e("#alert-title").val()+"</strong> "+e("#alert-content").val()+" </div>";o.execCommand("mceInsertContent",!1,c),t.remove()}))})),o.addButton("jnews_btn",{title:"Button",image:n+"/shortcode/button.png",cmd:"jnews_btn_cmd"}),o.addCommand("jnews_btn_cmd",(function(){(t=a("Button",[{type:"select",name:"Select button style ",id:"select-color",option:["default","primary","success","info","warning","danger"]},{type:"text",name:"Button Url",id:"btnurl"},{type:"text",name:"Button Text",id:"btntxt"}],500)).find("#exeCmd").on("click",(function(r){var a=e("#select-color").val(),n='<a href="'+e("#btnurl").val()+'" class="btn btn-'+a+'">'+e("#btntxt").val()+"</a>";o.execCommand("mceInsertContent",!1,n),t.remove()}))})),o.addButton("jnews_spacing",{title:"Spacing",image:n+"/shortcode/spacing.png",cmd:"jnews_spacing_cmd"}),o.addCommand("jnews_spacing_cmd",(function(){(t=a("Spacing",[{type:"text",name:"Size in px",id:"size"}],500)).find("#exeCmd").on("click",(function(r){var a='[spacing size="'+e("#size").val()+'"]';o.execCommand("mceInsertContent",!1,a),t.remove()}))})),o.addButton("jnews-shortcode-generator",{title:"JNews Generator",image:n+"/shortcode/generator.png",cmd:"shortcode_list"}),o.addCommand("shortcode_list",(function(){r.shortcodepopup.has("jnews")?r.shortcodepopup.instance("jnews").showPopup():r.shortcodepopup.add("jnews",new r.ShortCodeListPopup(o))})),o.addButton("jnews_weather",{title:"Weather",image:n+"/shortcode/weather.png",cmd:"jnews_weather_cmd"}),o.addCommand("jnews_weather_cmd",(function(){(t=a("Weather",[{type:"text",name:"Weather Location",id:"location"},{type:"checkbox",name:"Auto Detect Location",id:"auto_location"},{type:"select",name:"Next Days Weather Forecast",id:"item",option:["show","hide"]},{type:"slider",name:"Number of Weather Item",id:"count",min:3,max:6,step:1,value:4}],500)).find("#exeCmd").on("click",(function(r){var a=e("#location").val(),n=!1,c=e("#count").val(),l=e("#item").val();e("#auto_location").is(":checked")&&(n=!0);var i='[jeg_weather location="'+a+'" auto_location="'+n+'" count="'+c+'" item="'+l+'"]';o.execCommand("mceInsertContent",!1,i),t.remove()}))}))}));var o=function(e){for(var r,t="",o=0;o<e.length;o++)t+='<option value="'+e[o]+'">'+((r=e[o]).charAt(0).toUpperCase()+r.slice(1))+"</option>\n";return t},a=function(r,a,n){var c=function(e){for(var r="",t=0;t<e.length;t++){var a=e[t];"text"==a.type?r+="<label>"+a.name+" : </label><input type='text' id='"+a.id+"' name='"+a.id+"' />":"textarea"==a.type?r+="<label>"+a.name+" : </label><textarea id='"+a.id+"' name='"+a.id+"' /></textarea>":"grid"==a.type?r+="<label>"+a.name+" : <a href='#' title='Add Grid' class='addgrid'>&nbsp;</a></label><ul class='buildgrid'><li class='gridlist span12' data-length='12'><div class='gridcounter'>12/12</div><div class='panelgrid'><a href='#' class='plusgrid' title='Increase Grid Width'>plus</a><a href='#' class='reducegrid' title='Reduce Grid Width'>reduce</a><a href='#' class='removegrid' title='Remove Grid'>remove</a></div></li></ul>":"select"==a.type?r+="<label>"+a.name+" : </label><select id='"+a.id+"' name='"+a.id+"'>"+o(a.option)+"</select>":"colorpicker"==a.type?r+="<label>"+a.name+" : <input class='pickcolor' id='"+a.id+"' value='"+a.color+"'/></label>":"checkbox"==a.type?r+="<label>"+a.name+" :  <input type='checkbox' class='checkbox' id='"+a.id+"' /></label>":"slider"==a.type&&(r+="<label>"+a.name+" :  </label><div class='type-range-wrapper'><input type='range' class='range' id='"+a.id+"' min='"+a.min+"' max='"+a.max+"' step='"+a.step+"' value='"+a.value+"' /><span class='range-value'>"+a.value+"</span></div>")}return r}(a);return t=e('<div><div class="jeg-dialog-form">'+c+'</div><div class="jeg-dialog-submit"><input type="button" id="exeCmd" class="button-primary alignright" value="Insert" /></div><div style="clear: both;"></div></div>').dialog({title:r,modal:!0,dialogClass:"j-dialog",resizable:!0,width:n,close:function(e,r){jQuery(this).html("").remove()},create:function(){if(e(".pickcolor").length&&e(".pickcolor").each((function(){e(this).wpColorPicker()})),e(".type-range-wrapper").length&&e(".type-range-wrapper").each((function(){e(this).on("mousedown",(function(){var r=e(this).find("input").attr("value");e(this).mousemove((function(){r=e(this).find("input").attr("value"),e(this).find(".range-value").text(r)}))}))})),e(".buildgrid").length){var r=function(e){return'<li class="gridlist span'+e+'" data-length="'+e+'"><div class="gridcounter">'+e+'/12</div><div class="panelgrid"><a href="#" class="plusgrid" title="Increase Grid Width">plus</a> <a href="#" class="reducegrid" title="Reduce Grid Width">reduce</a> <a href="#" class="removegrid" title="Remove Grid">remove</a></div></li>'};e(".addgrid").on("click",(function(t){var o=e(".buildgrid > li").size();if(o<12){var a=function(e){for(var t="",o=Math.floor(12/e),a=0;a<e;a++)t+=r(o);return t}(o+1);e(".buildgrid").html(a)}return!1})),e(document).on("click",".buildgrid .removegrid",(function(r){return e(this).parent().parent().remove(),!1})),e(document).on("click",".buildgrid .reducegrid",(function(t){var o=e(this).parent().parent(),a=parseInt(e(o).attr("data-length"));if(1==a)e(o).remove();else{var n=r(a-1);e(o).replaceWith(n)}return!1})),e(document).on("click",".buildgrid .plusgrid",(function(t){var o,a=e(this).parent().parent(),n=parseInt(e(a).attr("data-length"));if(o=0,e(".buildgrid > li").each((function(){o+=parseInt(e(this).attr("data-length"),10)})),o<12){var c=r(n+1);e(a).replaceWith(c)}else alert("Remove or reduce other grid before increasing this grid size");return!1}))}}})}}(jQuery,wp.customize);