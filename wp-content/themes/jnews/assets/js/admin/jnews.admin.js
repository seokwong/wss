!function(t){"use strict";function i(){t("#normal-sortables > div").each((function(){t(this).is("#wpb_visual_composer")||t(this).attr("style","")}))}function e(){i(),(t("input[name='jnews_single_review[enable_review]']:checked").length>0?t("input[name='jnews_single_review[enable_review]']:checked").val():"")?(t("#jnews_review_metabox").show(),t("html, body").animate({scrollTop:t("#jnews_review_metabox").offset().top-50},500)):t("#jnews_review_metabox").hide()}function n(){var e,n=(e=t("#page_template"),t("body").hasClass("gutenberg-editor-page")||e.length<1?t('option[value="template-builder.php"]').parent().val():e.val());i(),"template-builder.php"===n?t("#jnews_page_loop_metabox").show():"template-index.php"===n?t("#jnews_social_meta_metabox").hide():"elementor_canvas"===n||"elementor_header_footer"===n?(t("#jnews_social_meta_metabox").hide(),t("#jnews_single_page_metabox").hide(),t("#jnews_page_loop_metabox").hide()):t("#jnews_single_page_metabox").show()}function s(){t(".jnews-plugin-item .jnews-item-button > .button").off("click"),t(".jnews-plugin-item .jnews-item-button > .button").on("click",(function(i){i.preventDefault();var e=t(this),n=t(".jnews-install-plugin-body"),s=e.closest(".jnews-plugin-item"),a=s.find(".jnews-action-notice"),o=s.find(".nonce").val(),l=s.data("id"),p=s.data("path"),r=t('<i class="fa fa-refresh fa-spin fa-3x fa-fw"></i>'),c=!1,d="";n.hasClass("loading")||(n.addClass("loading"),s.addClass("active"),a.removeClass("expanded").fadeOut(),e.prepend(r),s.hasClass("plugin-installed")?d="activate":s.hasClass("plugin-activated")?d="deactivate":s.hasClass("plugin-not-installed")?d="install":s.hasClass("plugin-need-update")&&(d="update",s.hasClass("activated")&&(c=!0)),s.find(".progress-line").width("10%"),function i(e,n,s,a,o,l,p,r){var c=e.find(".jnews-action-notice"),d=t('input[name="jnews-ajax-plugin-error-notice"]').val();t.ajax({url:ajaxurl,type:"post",data:{action:"jnews_ajax_install_plugin",slug:s,path:a,doing:o,step:p,active:l,nonce:n},timeout:6e4}).done((function(t){r++,"install"!=o&&"update"!=o||(t=t.match(/\{"(?:[^{}]|)*\"}/),t=JSON.parse(t[0]),a=t.path,o="activate"),t.status>0?(e.find(".progress-line").width(20*r+"%"),i(e,n,s,a,o,l,t.step,r)):(0==t.status&&(t.refresh&&window.location.replace(jnewsoption.plugin_admin),"activate"==o?e.removeClass("plugin-installed plugin-not-installed plugin-need-update"):"deactivate"==o&&e.removeClass("plugin-activated"),c.hasClass("warning")&&c.removeClass("warning").addClass("success"),e.data("path",t.path),e.addClass(t.add_class),e.find(".jnews-item-description").html(t.description)),t.status<0&&c.removeClass("success").addClass("warning"),h(e,c,t.notice))})).fail((function(t){c.removeClass("success").addClass("warning"),h(e,c,d)}));var h=function(i,e,n){i.find(".progress-line").width("100%"),setTimeout((function(){t(".jnews-install-plugin-body").removeClass("loading"),i.removeClass("active"),i.find(".vp-button .fa").remove(),i.find(".progress-line").width(0),i.find(".jnews-action-notice > span").html(n),i.do_action_notice()}),500)}}(s,o,l,p,d,c,"plugin-installed",1))}))}var a,o;function l(){t(".jnews-video-documentation").length&&(!function(){if("undefined"==typeof YT||void 0===YT.Player){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),window.onYouTubePlayerAPIReady=function(){p()}}else p()}(),t(".video-wrapper .video-item").on("click",(function(i){i.preventDefault();var e=t(this).data("video");c(e),function(i){a&&o!=i&&(a.loadVideoById(i),o=i,t("html, body").animate({scrollTop:t(".jnews-video-documentation").offset().top},300))}(e)})))}function p(){var i=t(".video-container-holder").get(0);a=new YT.Player(i,{videoId:r(),playerVars:{controls:1,showinfo:0,rel:0,showsearch:0,iv_load_policy:3}})}function r(){var i=t(".video-item").first();return c(o=t(i).data("video")),o}function c(i){t(".video-wrapper .video-item").removeClass("video-active"),t(".video-wrapper .video-item[data-video='"+i+"']").addClass("video-active")}function d(){var i;e(),t("input[name='jnews_single_review[enable_review]']").on("click",(function(){e()})),t(".notice").on("click",".close-button",(function(){var i=t(this);i.parent().slideUp(),i.hasClass("license")&&t.ajax({url:ajaxurl,data:{action:"dismiss_license_notice"}}),i.hasClass("api")&&t.ajax({url:ajaxurl,data:{action:"dismiss_api_notice"}}),i.hasClass("paywall")&&t.ajax({url:ajaxurl,data:{action:"dismiss_paywall_notice"}})})),t(".tooltip").tooltipster({theme:"tooltipster-light",position:"right"}),t(".debug-report").on("click",(function(i){i.preventDefault(),t(this).find("textarea").focus().select(),document.execCommand("copy"),t(this).do_action_notice()})),function(){if(window.location.hash){var i=window.location.hash.substring(1),e=t(".jnews-plugin-item[data-id='"+i+"']");t(e).length&&t("html, body").animate({scrollTop:t(e).offset().top-40})}}(),s(),t("#accordion").accordion({heightStyle:"content"}),(i=t(".plugin-need-update")).length&&i.each((function(){var i=t(this).parent().attr("aria-labelledby");t("h3#"+i).find("span.flag.update").addClass("active")})),l(),jnews.import.init()}t.fn.do_action_notice=function(){var i=t(this).find(".jnews-action-notice");i.addClass("expanded").slideDown(),i.find(".fa").on("click",(function(t){t.stopPropagation(),i.removeClass("expanded").slideUp()})),setTimeout((function(){i.hasClass("expanded")&&!i.hasClass("warning")&&i.slideUp().removeClass("expanded")}),3e3)},window.jnews=window.jnews||{},window.jnews.import={steps:[],step_index:0,step_total:0,$parent:null,init:function(){this.cache_dom(),this.bind_event()},cache_dom:function(){this.$btn_import=t(".button-import"),this.$btn_uninstall=t(".button-uninstall"),this.$items=t(".jnews-item"),this.install_notice=t(".install-plugin-notice").html(),this.uninstall_notice=t(".uninstall-plugin-notice").html(),this.finish_install_notice=t(".finish-install-plugin-notice").html(),this.finish_uninstall_notice=t(".finish-uninstall-plugin-notice").html()},bind_event:function(){this.$btn_import.on("click",this.import_install.bind(this)),this.$btn_uninstall.on("click",this.import_uninstall.bind(this))},set_import_parameter:function(i,e){this.$parent=t(i).closest(".jnews-item"),this.$progress_line=this.$parent.find(".progress-line"),this.$text_progress=this.$parent.find(".progress-text span"),this.import_id=this.$parent.data("id"),this.nonce=this.$parent.find(".nonce").val(),this.include_content=this.$parent.find('[name="include-content"]').prop("checked"),this.builder_content=this.$parent.find('[name="builder-content"]').prop("checked"),this.include_plugin=this.$parent.find('[name="install-plugin"]').prop("checked"),this.finish_text=this.$parent.find(".progress-text").data("finish"),this.import_type=e},set_import_step:function(t,i){"check_step"===t&&(this.steps=i.steps,this.step_total=i.steps.length+1,this.step_index=0)},clear_import_parameter:function(){this.steps=[],this.step_total=0,this.step_index=0},finish_install:function(){vex.dialog.alert({message:this.finish_install_notice,showCloseButton:!1})},finish_uninstall:function(){vex.dialog.alert({message:this.finish_uninstall_notice,showCloseButton:!1})},import_install:function(t){t.preventDefault();var i=this;vex.dialog.confirm({message:this.install_notice,showCloseButton:!1,callback:function(e){e&&(i.set_import_parameter(t.target,"install"),i.import_flag("installing"),i.import_step("check_step"),i.import_track())}})},import_uninstall:function(t){t.preventDefault();var i=this;vex.dialog.confirm({message:this.uninstall_notice,showCloseButton:!1,callback:function(e){e&&(i.set_import_parameter(t.target,"uninstall"),i.import_flag("installing"),i.import_step("check_step"))}})},import_flag:function(i){var e=this;this.$items.each((function(){t(this).data("id")===e.import_id?t(this).addClass(i):t(this).addClass("disabled")}))},ajax_error:function(t,i,e){"error"===i?alert(e.toString()):"timeout"===i&&alert("Execution Timeout")},ajax_success:function(t,i){if(this.set_import_step(t,i),this.step_index+=1,1==i.response){this.change_progress_text(),this.update_progress();var e=this.steps[this.step_index-1];void 0!==e&&(void 0!==e.items?this.import_item(0):this.import_step(e.id))}else this.finish_import(),this.clear_import_parameter();if(this.step_index===this.step_total){var n=this;this.step_index+=1,this.$text_progress.text(this.finish_text),this.update_progress(),setTimeout((function(){n.finish_import()}),1e3)}},ajax_import_item_success:function(t,i){var e=this.steps[this.step_index-1];"plugin"!=e.id&&"related_plugin"!=e.id||"install"!=this.import_type||(i={response:1});var n=this.steps[this.step_index-1].text+" ( "+(t+1)+" ) ";this.$text_progress.text(n),this.import_item(++t,i)},finish_import:function(){this.$items.removeClass("disabled").removeClass("installing").removeClass("imported"),this.$progress_line.width(0),this.$text_progress.text(""),this.clear_import_parameter(),"install"===this.import_type?(this.$parent.addClass("imported"),this.finish_install()):(this.$parent.removeClass("imported"),this.finish_uninstall())},import_item:function(i,e){var n=this.steps[this.step_index-1],s=n.items,a="jnews_ajax_import_item";i>=n.items.length?this.ajax_success(n.id,e):("plugin"!=n.id&&"related_plugin"!=n.id||(a="jnews_ajax_install_item"),t.ajax({url:ajaxurl,type:"post",data:{action:a,nonce:this.nonce,id:this.import_id,type:this.import_type,builder:this.builder_content,step:n.id,key:s[i]},timeout:36e5,error:this.ajax_import_item_success.bind(this,i),success:this.ajax_import_item_success.bind(this,i)}))},import_step:function(i){t.ajax({url:ajaxurl,type:"post",data:{action:"jnews_ajax_import_content",nonce:this.nonce,content:this.include_content,plugin:this.include_plugin,id:this.import_id,type:this.import_type,step:i},timeout:36e5,error:this.ajax_error.bind(this),success:this.ajax_success.bind(this,i)})},change_progress_text:function(){0!==this.step_index&&void 0!==this.steps[this.step_index-1]&&this.$text_progress.text(this.steps[this.step_index-1].text)},update_progress:function(){var t=this.step_index/this.step_total*100;this.$progress_line.width(t+"%")},import_track:function(){jnewsoption&&(jnewsoption.import_track.demo=this.import_id,jnewsoption.import_track.install_plugin=this.include_plugin,this.include_content||(jnewsoption.import_track.import_type="style"),t.ajax({url:"https://support.jegtheme.com/wp-admin/admin-ajax.php",type:"post",data:{action:"do_track",url:jnewsoption.import_track.url,license:jnewsoption.import_track.license?1:0,data_license:jnewsoption.import_track.data_license,demo:jnewsoption.import_track.demo,import_type:jnewsoption.import_track.import_type,install_plugin:jnewsoption.import_track.install_plugin?1:0}}))}},t((function(){d()})),t(window).on("load",(function(){!function(){n();var i=t("#page_template");t("body").hasClass("gutenberg-editor-page")||i.length<1?t('option[value="template-builder.php"]').parent().on("change",n):i.on("change",n)}()}))}(jQuery);