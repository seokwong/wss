!function(e,n){"use strict";function t(e,n){return n.substr(0,e.length)==e}function a(e){var t=n(e).parents(".header-builder-column").data("column");return[n(e).parents(".header-builder-row").data("row"),t,n(e).parents(".header-builder-device").data("device")]}function i(t,a){var i=e.control(t);i&&n(i.container.find("select")).selectize()[0].selectize.setValue(a,!0);var o=e.instance(t);o&&o.set(a)}function o(e,n,t,a,o){i(n+"_"+e+"_"+t+"_"+a,o)}function r(){n("[data-section^=jnews]").on("click",(function(){!function(a){var i=n(a).data("section"),o="",r=n(a).parents(".header-builder-device").data("device");if("jnews_header_ads"===i)o="jnews_ads_header_section";else if(t("jnews_header_html",i))o="jnews_header_html_section";else if(t("jnews_header_button",i))o="jnews_header_button_section";else if(t("jnews_header_verticalmenu",i))o="jnews_header_vertical_menu_section";else if(t("jnews_header_search_icon",i)){if("mobile"===r)return void d("jnews_header_search_icon_section[jnews_header_search_icon_mobile]");o=i+"_section"}else o=i+"_section";var s=e.section(o);s&&s.focus()}(this)})),n("[data-control^=jnews]").on("click",(function(){d(this)}))}function d(t){var a="string"==typeof t?t:n(t).data("control"),i=/([^[]+)\[([^\]]+)\]/g;if(a.match(i)){var o=i.exec(a),r=e.section(o[1]);if(r.loaded)s(o[2]);else r.expand().done((function(){setTimeout((function(){s(o[2])}))}),3e3)}else s(a)}function s(n){var t=e.control(n);t&&t.focus()}function c(){n("body").addClass("header-builder-open")}function l(){n("body").removeClass("header-builder-open")}function u(e,t,a,i){var o=n("[data-device='"+e+"'] [data-row='"+t+"'] [data-column='"+a+"'] [data-align='"+i+"']");n(o).parent().find("> li").removeClass("active"),n(o).addClass("active"),n(o).parents(".header-builder-column").removeClass("left center right").addClass(i)}function h(e,t,a,i){var o=n("[data-device='"+e+"'] [data-row='"+t+"'] [data-column='"+a+"'] [data-display='"+i+"']");n(o).parent().find("> li").removeClass("active"),n(o).addClass("active"),n(o).parents(".header-builder-column").removeClass("grow normal").addClass(i)}function _(e){var t=n(e).parents(".header-builder-device"),a=n(t).find(".header-builder-list");n(e).find(".header-element").appendTo(a)}function f(e){if(e=n(e).hasClass("header-builder-drop-zone")?e:n(e).parents(".header-builder-drop-zone"),n(e).hasClass("header-builder-list"))return null;var t=[];n(e).find(".header-element").each((function(){t.push(n(this).data("element"))}));var i=a(e);o(i[2],"jnews_hb_element",i[0],i[1],t)}function p(e,t,a,i){var o=n("[data-device='"+e+"'] [data-row='"+t+"'] [data-column='"+a+"']");_(o);var r=n(o).find(".header-builder-drop-zone ");n.each(i,(function(t,a){var i=function(e,t){return n("[data-device='"+e+"'] [data-element='"+t+"']")}(e,a);n(i).appendTo(r)}))}function b(){n(".header-builder-wrapper").sortable({handle:".header-builder-row-drag-handle",cancel:".header-builder-top",update:function(){var e;e=[],n("[data-device='desktop'] .header-builder-row").each((function(){e.push(n(this).data("row"))})),i("jnews_hb_arrange_bar",e)},beforeStop:function(e,t){var a,i=n(t.placeholder).index(),o="mid"===n(t.item).data("row")||"bottom"===n(t.item).data("row");1===i&&o&&(n(this).sortable("cancel"),a="Unable to move <strong>Middle Bar & Bottom Bar</strong> above <strong>Top Bar</strong>",n(".warning-text").html(a),n(".header-builder-warning").fadeIn("fast"),n(".close-warning").on("click",(function(){n(this).parents(".header-builder-warning").fadeOut("fast")})))}})}e.controlConstructor["jeg-preset"]=e.controlConstructor.default.extend({ready:function(){var t,a=this;this.container.on("change","select",(function(){t=jQuery(this).val(),a.setting.set(t),"jnews_hb_preset"===a.id?function(t,a){var i=null;n.each(t.params.choices,(function(e,n){a===e&&(i=n.settings)})),function(t){var a=e.panel("jnews_header").sections();n.each(a,(function(e,a){var i=a.controls();n.each(i,(function(e,n){void 0!==t[n.id]?jegSetSettingValue(n.id,t[n.id]):jegSetSettingValue(n.id,n.params.default)}))}))}(i),n(".header-builder-body .header-builder-device").each((function(){var e=n(this),t=n(e).find(".header-builder-column");n.each(t,(function(e,n){_(n)}))})),c=["left","center","right"],n.each(["top","mid","bottom"],(function(t,a){n.each(c,(function(n,t){var i=e.control("jnews_hb_align_desktop_"+a+"_"+t).setting(),o=e.control("jnews_hb_display_desktop_"+a+"_"+t).setting(),r=e.control("jnews_hb_element_desktop_"+a+"_"+t).setting();u("desktop",a,t,i),h("desktop",a,t,o),p("desktop",a,t,r)}))})),o="desktop",r=e.control("jnews_hb_arrange_bar").setting(),n.each(r,(function(e,t){s=n("[data-device='"+o+"'] [data-row='"+t+"']"),e>0&&n(s).insertAfter(d),d=n("[data-device='"+o+"'] [data-row='"+t+"']")})),function(){var t=["left","center","right"];n.each(["mid"],(function(a,i){n.each(t,(function(n,t){var a=e.control("jnews_hb_align_desktop_sticky_"+i+"_"+t).setting(),o=e.control("jnews_hb_display_desktop_sticky_"+i+"_"+t).setting(),r=e.control("jnews_hb_element_desktop_sticky_"+i+"_"+t).setting();u("desktop_sticky",i,t,a),h("desktop_sticky",i,t,o),p("desktop_sticky",i,t,r)}))}))}(),n.each({top:["center"],mid:["left","center","right"]},(function(t,a){n.each(a,(function(n,a){var i=e.control("jnews_hb_align_mobile_"+t+"_"+a).setting(),o=e.control("jnews_hb_display_mobile_"+t+"_"+a).setting(),r=e.control("jnews_hb_element_mobile_"+t+"_"+a).setting();u("mobile",t,a,i),h("mobile",t,a,o),p("mobile",t,a,r)}))})),function(){var t=["center"];n.each(["top","bottom"],(function(a,i){n.each(t,(function(n,t){var a=e.control("jnews_hb_element_mobile_drawer_"+i+"_"+t).setting();p("mobile_drawer",i,t,a)}))}))}();var o,r,d,s;var c}(a,t):n.each(a.params.choices,(function(e,a){t===e&&n.each(a.settings,(function(e,n){jegSetSettingValue(e,n)}))}))}))}}),n(document).on("ready",(function(){n("body").on("jeg-open-header-builder",c),n(".top-menu.close").on("click",(function(){l()})),n(".header-builder-open").on("click",c),n(".device-mode > div").on("click",(function(){n(".devices .preview-"+n(this).data("mode")).click()})),n(".desktop-mode li").on("click",(function(){var e=n(this).data("desktop-mode");n(".wp-full-overlay").removeClass("sticky normal").addClass(e)})),n(".mobile-mode li").on("click",(function(){var e=n(this).data("mobile-mode");n(".wp-full-overlay").removeClass("mobile_menu drawer").addClass(e)})),b(),n(".header-column-option-align li").on("click",(function(e){if(!n(this).hasClass("active")){var t=a(this);u(t[2],t[0],t[1],n(this).data("align")),o(t[2],"jnews_hb_align",t[0],t[1],n(this).data("align"))}})),n(".header-column-option-display li").on("click",(function(e){if(!n(this).hasClass("active")){var t=a(this);h(t[2],t[0],t[1],n(this).data("display")),o(t[2],"jnews_hb_display",t[0],t[1],n(this).data("display"))}})),n(".header-builder-drop-zone").sortable({items:".header-element",connectWith:".header-builder-drop-zone",update:function(e,n){null!==n.sender&&f(n.sender),f(n.item)}}),n(".header-element-close").on("click",(function(){var e=n(this).parent(),t=n(e).parent(),a=n(this).parents(".header-builder-body"),i=n(a).find(".header-builder-list");n(e).appendTo(i),f(t)})),r(),n(".header-setting").on("mousedown",(function(){var e=n(this),t=n(e).parents(".header-builder-column");n(t).hasClass("active")?n(t).removeClass("active"):(n(".header-builder-column").removeClass("active"),n(t).addClass("active"))})),n(document).on("mousedown",(function(e){var t=e.target,a=n(t).parents(".header-column-option-tooltip"),i=n(t).parents(".header-setting"),o=n(t).hasClass("header-setting");0!==a.length||0!==i.length||o||n(".header-builder-column").removeClass("active")})),n("#customize-header-actions").append("<div class='jeg-btn-header-builder'><i class='fa fa-bars'></i></div>"),n(".jeg-btn-header-builder").on("click",(function(){n("body").hasClass("header-builder-open")?l():c()}))}))}(wp.customize,jQuery);