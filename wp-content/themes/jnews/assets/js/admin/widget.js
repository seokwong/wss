!function(e){"use strict";e((function(){var t=e("#widgets-right, #menu-management, #edittag, #your-profile"),n=[],i=function(){var t=e(".widget-overlay-wrapper").height(),n=e(window).height();e(".widget-overlay-wrapper").css({top:(n-t)/2})};e(".widget-overlay .close").on("click",(function(){e(".widget-overlay").fadeOut()})),e(".addwidgetconfirm").on("click",(function(){var t=e(".textwidgetconfirm").val();if(""!==t&&function(t){var n=0;return e(".widget-content-wrapper li span").each((function(){e(this).text().toLowerCase()===t.toLowerCase()&&n++})),0===n}(t)){var n="<li><span>"+t+"</span><input type='hidden' name='widgetlist[]' value='"+t+"'><div class='remove fa fa-ban'></div></li>";e(".widget-content-wrapper ul").append(n),e(".textwidgetconfirm").val("")}e(".widget-adding-content").hide(),e(".widget-content-list").show()})),e(".addwidget").on("click",(function(){e(".widget-adding-content").show(),e(".widget-content-list").hide(),e(".textwidgetconfirm").val("")})),e(".widget-overlay").on("click",".widget-content-wrapper .remove",(function(){var t=e(this).parents("li");e(t).fadeOut((function(){e(t).remove()}))})),e(".sidebarwidget").on("click",(function(){e(".widget-overlay").fadeIn(),0===e(".widget-content-wrapper li").length?(e(".widget-adding-content").show(),e(".widget-content-list").hide()):(e(".widget-adding-content").hide(),e(".widget-content-list").show()),i()})),e(".linkedin-oauth-code-enable").length&&(setTimeout((function(){e(".sidebarwidget").trigger("click")}),100),e(".linkedin-oauth-code input").on("click",(function(t){t.preventDefault(),e(this).focus().select(),document.execCommand("copy"),e(this).closest(".linkedin-oauth-code").do_action_notice()}))),e(window).on("resize",i),e(t).on("click",".jnews_token_access",(function(t){t.preventDefault();var n,i,a,o,r,s=e(this),d=s.closest(".widget-content");if(s.hasClass("facebook")){var c=d.find('.type-text[data-field="fb_id"] input'),l=d.find('.type-text[data-field="fb_secret"] input');c.length>0&&l.length>0?(c=c.val(),l=l.val()):(c=(d=s.closest(".accordion-section-content")).find('input[data-customize-setting-link="setting(jnews_social_like_section)(jnews_option[single_social_share_fb_id])"]').val(),l=d.find('input[data-customize-setting-link="setting(jnews_social_like_section)(jnews_option[single_social_share_fb_secret])"]').val()),r={client_id:c,client_secret:l,grant_type:"client_credentials"},n="https://graph.facebook.com/oauth/access_token",i="fb"}s.hasClass("linkedin")&&(r={action:"jnews_scrap_data_social_counter",social_type:"linkedin_token",social_grab:"https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&code="+d.find('.type-text[data-field="linkedin_code"] input').val()+"&redirect_uri="+window.location+"&client_id="+d.find('.type-text[data-field="linkedin_id"] input').val()+"&client_secret="+d.find('.type-text[data-field="linkedin_secret"] input').val()},n=ajaxurl,i="linkedin",o="json");e.ajax({url:n,data:r,dataType:o,type:"POST",beforeSend:function(e){s.parent().find(".jnews-spinner").addClass("active")}}).done((function(e,t,n){"fb"==i&&(a=e.access_token),"linkedin"==i&&(a=e.token),d.hasClass("accordion-section-content")?d.find('input[data-customize-setting-link="setting(jnews_social_like_section)(jnews_option[single_social_share_fb_token])"]').val(a):d.find('.type-text[data-field="'+i+'_key"] input').val(a)})).fail((function(e,t,n){window.alert("Info Message: "+n)})).always((function(e,t,n){s.parent().find(".jnews-spinner").removeClass("active")}))})),e(t).on("click",".jnews_oauth_code",(function(t){t.preventDefault();var n="https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id="+e(this).closest(".widget-content").find('.type-text[data-field="linkedin_id"] input').val()+"&scope=r_basicprofile&state="+(new Date).getTime()+"&redirect_uri="+window.location;window.open(n,"_blank").focus()})),e(t).on("click",".jnews_instagram_access_token",(function(e){if(e.preventDefault(),"undefined"!=typeof jnewsinstagramoption){var t="https://api.instagram.com/oauth/authorize?app_id=423965861585747&redirect_uri=https://api.smashballoon.com/instagram-basic-display-redirect.php&response_type=code&scope=user_profile,user_media&state="+jnewsinstagramoption.instagram_callback;window.open(t,"_blank").focus()}})),e(t).on("click",".jnews_instagram_purge_cache",(function(t){t.preventDefault(),e.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"jnews_instagram"}})}));!function(){if(window.location.href.indexOf("#access_token=")>-1){var e=window.location.href.split("#access_token=")[1];prompt("Your Instagram Access Token:",e)}}();var a=function(t,n){e("[id="+t+"]").on("change",(function(){o(n)}))},o=function(t){for(var n=(l=t.element).replace(t.field,""),i=e("[id="+t.element+"]").parents(".widget-wrapper"),a=!0,o=0;o<t.dep.length;o++){var s=t.dep[o],d=n+s.field;r()&&(d=s.field+n);var l,p=(l=e("[id="+d+"]")).attr("type"),u=!1;"checkbox"==p&&(u=l.is(":checked")),"select"==p&&(u=l.val()),"hidden"==p&&(u=l.attr("value")),"radio-image"==p&&(u=l.find("input[type=radio]:checked").val()),compare=c(s.operator,s.value,u),compare||(a=!1)}a?i.addClass("jeg-dep-show").removeClass("jeg-dep-hide"):i.addClass("jeg-dep-hide").removeClass("jeg-dep-show")},r=function(){return!!e("#edittag").length||!!e("#your-profile").length},s=function(t,n){var i=e(t).next();0!==i.length&&i.hasClass("jeg_accordion_wrapper")&&(n?i.slideDown("fast"):i.slideUp("fast"),s(i,n))},d=function(e){var t=!1;e.is(":checked")&&(t=!0),s(e.parent(),t)},c=function(e,t,n){return"==="===e?t===n:"="===e||"=="===e?t==n:"!=="===e?t!==n:"!="===e?t!=n:">="===e?t>=n:"<="===e?t<=n:">"===e?t>n:"<"===e?t<n:"in"===e?t.indexOf(n)>=0:"ex"===e?t.indexOf(n)<0:void 0};window.widget_script=function(i){function s(t,n,i,a,o){t.find("input.input-sortable").selectize({plugins:["drag_drop","remove_button"],options:n,persist:!0,create:!0,hideSelected:!0,render:{option:function(e){return i?void 0===e.text?"<div><span>"+e.value+"</span></div>":"<div><span>"+e.text+"</span></div>":'<div class="'+e.class+'"><span>'+e.text+"</span></div>"}},load:function(t,n){if(i){if(!t.length||t.length<3)return n();(function(t,n,i){return e.ajax({url:t,type:"POST",dataType:"json",data:{string:n,action:i}})})(ajaxurl,encodeURIComponent(t),a).done((function(e){n(e)}))}},onItemAdd:function(){if(!o){var e=this.items;if(e.length>1)for(var t=0;t<e.length;t++)this.removeItem(e[t]),this.refreshOptions()}}})}e(t=void 0===i?t:i).find('input[name^="category_override"]').change((function(){d(e(this))})),e(t).find('input[name^="category_override"]').each((function(){d(e(this))})),e(t).find(".widget-wrapper").each((function(){var t=e(this),i=t.find("label").attr("for"),a=t.attr("data-field"),o=t.attr("data-dependency");t.hasClass("jeg-dep-bind")||void 0!==o&&!1!==o&&(o=JSON.parse(o),n.push({dep:o,field:a,element:i}),t.addClass("jeg-dep-bind"))})),function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.element.replace(n.field,"");o(n);for(var s=0;s<n.dep.length;s++){var d=n.dep[s],c=i+d.field;r()&&(c=d.field+i),a(c,n)}}}(n),e(t).find(".jnews-color-picker-clone").each((function(){var t=e(this),n=250,i=e(this).parents(".widget-wrapper").get(0),a=e(i).find(".jnews-color-picker");e("#customize-controls").length&&(n=200),t.wpColorPicker({change:function(t,n){var i=n.color.toString();e(a).val(i).trigger("change")},clear:function(){e(a).val("").trigger("change")},width:n})})),e(t).find(".type-slider").each((function(){var t=e(this).find("input[type=range]"),n=t.attr("value");t.closest("div").find(".jnews_range_value .value").text(n),t.on("mousedown",(function(){e(this).mousemove((function(){var t=e(this).attr("value");e(this).closest("div").find(".jnews_range_value .value").text(t)}))})),t.on("click",(function(){var t=e(this).attr("value");e(this).closest("div").find(".jnews_range_value .value").text(t)})),e(this).find(".jnews-slider-reset").on("click",(function(){thisInput=e(this).closest("div.wrapper").find("input"),inputDefault=thisInput.data("reset_value"),thisInput.val(inputDefault),thisInput.change(),e(this).closest("div.wrapper").find(".jnews_range_value .value").text(inputDefault)}))})),e(t).find(".type-number input[type=text]").each((function(){var t=this,n=e(this).attr("min"),i=e(this).attr("max"),a=e(this).attr("step");e(t).spinner({min:n,max:i,step:a,stop:function(){e(t).trigger("change")}})})),e(t).find(".singlecategory-wrapper").each((function(){var t=e(this),n=JSON.parse(t.find(".data-option").text());t.hasClass("jeg-ajax-load")?s(t,n,!0,"vp_find_ajax_post_category",!1):s(t,n,!1,!1,!1)})),e(t).find(".multicategory-wrapper").each((function(){var t=e(this),n=JSON.parse(t.find(".data-option").text());t.hasClass("jeg-ajax-load")?s(t,n,!0,"vp_find_ajax_post_category",!0):s(t,n,!1,!1,!0)})),e(t).find(".multitag-wrapper").each((function(){var t=e(this),n=JSON.parse(t.find(".data-option").text());t.hasClass("jeg-ajax-load")?s(t,n,!0,"vp_find_ajax_post_tag",!0):s(t,n,!1,!1,!0)})),e(t).find(".multiauthor-wrapper").each((function(){var t=e(this),n=JSON.parse(t.find(".data-option").text());t.hasClass("jeg-ajax-load")?s(t,n,!0,"vp_find_ajax_author",!0):s(t,n,!1,!1,!0)})),e(t).find(".multiselect-wrapper input.input-sortable").each((function(){if(e(this).hasClass("selectized"));else{var t=e(this).parent().find(".data-option");t.length&&(t=JSON.parse(t.text()),e(this).selectize({plugins:["drag_drop","remove_button"],options:t,persist:!0,create:!0,hideSelected:!1,render:{option:function(e){return'<div class="'+e.class+'"><span>'+e.text+"</span></div>"}}}))}})),e(t).find(".multipost-wrapper input.input-sortable").each((function(){if(e(this).hasClass("selectized"));else{var t=e(this).parent().find(".data-option");t=JSON.parse(t.text()),e(this).selectize({plugins:["drag_drop","remove_button"],persist:!0,create:!0,hideSelected:!0,valueField:"value",labelField:"value",options:t,render:{option:function(e){return void 0===text?"<div><span>"+e.value+"</span></div>":"<div><span>"+e.text+"</span></div>"}},load:function(t,n){if(!t.length||t.length<3)return n();e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{string:encodeURIComponent(t),action:"jeg_find_post"},error:function(){n()},success:function(e){n(e)}})}})}})),e(".iconpicker").iconpicker({arrowPrevIconClass:"fa fa-chevron-left",arrowNextIconClass:"fa fa-chevron-right",iconset:"fontawesome"})},e.fn.jeg_repeater=function(){var t,n,i=this;i.row_label=JSON.parse(i.find(".repeater-value").attr("data-label")),i.fields=JSON.parse(i.find(".repeater-value").attr("data-field")),i.value=i.find(".repeater-value").val(),i.selector=i.context.id,i.setting=null,n=JSON.parse(decodeURIComponent(i.value)),i.settingField=i.find("[data-customize-setting-link]").first(),l(i,[],!1),i.find(".repeater-fields").first().html(""),i.repeaterFieldsContainer=i.find(".repeater-fields").first(),i.currentIndex=0,i.rows=[],i.off("click"),i.on("click","button.repeater-add",(function(e){e.preventDefault(),(t=u(i)).toggleMinimize(),w(i,t)})),i.on("click",".repeater-row-remove",(function(t){i.currentIndex--,e(i.selector+" .limit").removeClass("highlight")})),i.repeaterTemplate=_.memoize((function(){var e={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(t){return _.template(i.find(".customize-control-repeater-content").first().html(),null,e)(t)}})),n.length&&_.each(n,(function(e){t=u(i,e),w(i,t,e)})),l(i,n,!0,!0),i.repeaterFieldsContainer.sortable({handle:".repeater-row-header",update:function(e,t){f(i)}})};var l=function(t,n,i,a){var o=n,r=[];a&&(e.each(t.fields,(function(e,t){"image"!==t.type&&"cropped_image"!==t.type&&"upload"!==t.type||r.push(e)})),e.each(n,(function(t,n){e.each(r,(function(e,i){void 0!==n[i]&&void 0!==n[i].id&&(o[t][i]=n[i].id)}))}))),t.setting=encodeURIComponent(JSON.stringify(o)),t.find(".repeater-value").val(t.setting)},p=function(e){return JSON.parse(decodeURIComponent(e.setting))},u=function(e,t){var n,i,a,o=e,r=o.repeaterTemplate(),s=p(e),d={};if(r){if(n=jQuery.extend(!0,{},o.fields),t)for(a in t)t.hasOwnProperty(a)&&n.hasOwnProperty(a)&&(n[a].default=t[a]);for(a in n.index=e.currentIndex,r=r(n),(i=new v(o.currentIndex,jQuery(r).appendTo(o.repeaterFieldsContainer),o.row_label)).container.on("row:remove",(function(e,t){h(o,t)})),i.container.on("row:update",(function(e,t,n,a){g.call(o,e,t,n,a),i.updateLabel()})),e.rows[e.currentIndex]=i,n)n.hasOwnProperty(a)&&(d[a]=n[a].default);return s[e.currentIndex]=d,l(e,s,!0),e.currentIndex++,i}},f=function(e){var t=e,n=e.repeaterFieldsContainer.find(".repeater-row"),i=[],a=p(t),o=[],r=[];n.each((function(e,t){i.push(jQuery(t).data("row"))})),jQuery.each(i,(function(e,n){o[e]=t.rows[n],o[e].setRowIndex(e),r[e]=a[n]})),t.rows=o,l(t,r)},h=function(e,t){var n,i=p(e);for(n in i[t]&&e.rows[t]&&(i.splice(t,1),delete e.rows[t],l(e,i,!0)),1,e.rows)e.rows.hasOwnProperty(n)&&e.rows[n]&&(e.rows[n].updateLabel())},g=function(e,t,n,i){var a,o,r;this.rows[t]&&this.fields[n]&&(a=this.fields[n].type,o=this.rows[t],r=p(this),i=jQuery(i),void 0!==typeof r[o.rowIndex][n]&&(r[o.rowIndex][n]="checkbox"===a?i.is(":checked"):i.val(),l(this,r,!0)))},w=function(e,t,n){var i,a,o=e,r=t.container.find(".repeater-dropdown-pages select");0!==r.length&&(i=jQuery(r).selectize()[0].selectize,a=r.data("field"),n&&l(i,n[a]),e.container.on("change",".repeater-dropdown-pages select",(function(t){var n=jQuery(t.target),i=n.closest(".repeater-row").data("row"),a=p(o);a[i][n.data("field")]=jQuery(e).val(),l(o,a)})))},v=function(e,t,n){var i=this;this.rowIndex=e,this.container=t,this.label=n,this.header=this.container.find(".repeater-row-header"),this.header.on("click",(function(){i.toggleMinimize()})),this.container.on("click",".repeater-row-remove",(function(){i.remove()})),this.header.on("mousedown",(function(){i.container.trigger("row:start-dragging")})),this.container.on("keyup change","input, select, textarea",(function(e){i.container.trigger("row:update",[i.rowIndex,jQuery(e.target).data("field"),e.target])})),this.setRowIndex=function(e){this.rowIndex=e,this.container.attr("data-row",e),this.container.data("row",e),this.updateLabel()},this.toggleMinimize=function(){this.container.hasClass("minimized")?this.container.find(".repeater-row-content").slideDown("fast"):this.container.find(".repeater-row-content").slideUp("fast"),this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")},this.remove=function(){this.container.slideUp(300,(function(){jQuery(this).detach()})),this.container.trigger("row:remove",[this.rowIndex])},this.updateLabel=function(){var e,t;"field"!==this.label.type||"function"!=typeof(e=this.container.find('.repeater-field [data-field="'+this.label.field+'"]')).val||""===(t=e.val())?this.header.find(".repeater-row-label").text(this.label.value+" "+(this.rowIndex+1)):this.header.find(".repeater-row-label").text(t)},this.updateLabel()};e(document).ajaxComplete((function(){widget_script()})),e("#customize-controls").on("click",".widget-top",(function(){widget_script()})),e("#available-widgets-list .widget-tpl").on("click",(function(){setTimeout((function(){widget_script()}),100)})),widget_script()}))}(jQuery);